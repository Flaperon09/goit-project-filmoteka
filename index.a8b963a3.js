const e=document.querySelector(".js-films-container"),n=document.querySelector(".js-search-form");n.addEventListener("submit",function(s){s.preventDefault(),o(a=s.target[0].value,1).then(n=>{t=!0,0===n.results.length&&function(){let e=document.querySelector(".js-search-message");e.classList.add("show-message"),setTimeout(()=>{e.classList.remove("show-message")},4500)}(),f(n.results),e.innerHTML=m,c(n.total_pages,1)}).catch(e=>console.log(e)).finally(()=>n.reset())});let t=!1,a="";function o(e,n){return fetch(`https://api.themoviedb.org/3/search/movie?query=${e}&api_key=70e00eb52bcb7ab46f183ec1381bf837&include_adult=false&language=en-US&page=${n}`,{method:"GET",headers:{accept:"application/json"}}).then(e=>e.json())}const s=document.querySelector(".js-pagination-list"),l=document.querySelector(".js-pagination-container");function c(n,c){if(n<2||t&&a==[]){l.classList.add("hidden");return}let d="",r="",u=c-2,p=c+2;c>1&&(d+=`<li class="btn prev" onClick='element(${n}, ${c-1})'>L</li>`),window.innerWidth>767&&c>3&&(d+=`<li class="numb" onClick='element(${n}, 1)'><span>1</span></li>`,c>4&&(d+='<li class="dots"><span>...</span></li>')),c===n?u-=2:c===n-1&&(u-=1),1===c?p+=2:2===c&&(p+=1);for(let s=u;s<=p;s+=1)s>n||s<1||(0===s&&(s+=1),s===c?(r="active",c=s,t?function(n){o(a,n).then(n=>{t=!0,f(n.results),e.innerHTML=m}).catch(e=>console.log(e))}(c):h(c)):r="",d+=`<li class="numb ${r}" onClick='element(${n}, ${s})'><span>${s}</span></li>`);window.innerWidth>767&&c<n-2&&(c<n-3&&(d+='<li class="dots"><span>...</span></li>'),d+=`<li class="numb" onClick='element(${n}, ${n})'><span>${n}</span></li>`),c<n&&(d+=`<li class="btn next" onclick='element(${n}, ${c+1})'>R</li>`),s.innerHTML=d}window.element=c;const d=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];let r=[],m="",u=!1,p=0;function h(e){2!==(p+=1)&&fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=70e00eb52bcb7ab46f183ec1381bf837&language=en-US&page=${e}`,{method:"GET",headers:{accept:"application/json"}}).then(e=>e.json()).then(n=>{var t;f(n.results),document.querySelector(".js-films-container").innerHTML=m,function(){let e={openModalBtn:document.querySelectorAll("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};for(i=0;i<e.openModalBtn.length;i+=1)e.openModalBtn[i].removeEventListener("click",n);for(i=0;i<e.openModalBtn.length;i+=1)e.openModalBtn[i].addEventListener("click",n);function n(n){document.body.classList.add("modal-open"),e.modal.classList.remove("is-hidden"),e.closeModalBtn.addEventListener("click",t),n.currentTarget.getAttribute("data-modal-open")}function t(){document.body.classList.remove("modal-open"),e.modal.classList.add("is-hidden"),e.closeModalBtn.removeEventListener("click",t)}}();let a=totalPages=(t=n.total_pages)>500?500:t;u||(c(a,e),u=!0)}).catch(e=>console.error(e))}function f(e){return console.log(e),m=e.map(({title:e,genre_ids:n,release_date:t,poster_path:a,id:o})=>(r=[],d.map(({id:e,name:t})=>{n.forEach(n=>{e===n&&r.push(t)})}),`
        <div class="film-container js-film-container" data-modal-open="${o}">
            <div class="image-wrapper">
                <img class="film-image" src="https://image.tmdb.org/t/p/w500${a}" />
            </div>
            <h2 class="film-title">${e.toUpperCase()}</h2>
            <p class="film-data">${[...r].join(", ")} | ${t.split("-")[0]}</p>
        </div>
        `)).join("")}h(1);
//# sourceMappingURL=index.a8b963a3.js.map
